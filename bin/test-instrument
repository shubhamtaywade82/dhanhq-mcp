#!/usr/bin/env ruby
# frozen_string_literal: true

# Manual test script for Instrument tools
# Usage: bin/test-instrument
#
# Note: Instrument model uses public CSV data and doesn't require authentication

$LOAD_PATH.unshift(File.expand_path("../lib", __dir__))

require "dhanhq-mcp"

# Create context (client not needed for Instrument operations)
client = Object.new
context = Dhanhq::Mcp::Context.new(client: client)

# Test instrument.find
puts "Testing instrument.find..."
result = Dhanhq::Mcp::Tools::Instrument.new(context).find(
  "exchange_segment" => "IDX_I",
  "symbol" => "NIFTY",
)
puts JSON.pretty_generate(result)

# Test instrument.info
puts "\nTesting instrument.info..."
result = Dhanhq::Mcp::Tools::Instrument.new(context).info(
  "exchange_segment" => "IDX_I",
  "symbol" => "NIFTY",
)
puts JSON.pretty_generate(result)

puts "\nâœ… CHECKPOINT 2 PASSED"
